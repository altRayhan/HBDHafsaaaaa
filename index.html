<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Hafsaaaaaa</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00f2ff; /* Cyan Neon */
            --pink: #ff007f; /* Deep Pink */
            --glass: rgba(255, 255, 255, 0.05);
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; 
            height: 100dvh; /* Mobile viewport fix */
            background: #020202; color: white; 
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; 
            display: flex; justify-content: center; align-items: center;
        }

        /* Background Stars */
        #starfield {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #0a0a0a 0%, #000 100%);
            z-index: -1;
        }

        /* --- Music Start Overlay --- */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); z-index: 999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }
        
        #start-btn {
            padding: 15px 40px; background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--neon); color: var(--neon);
            font-family: 'Montserrat', sans-serif; font-size: 0.9rem; letter-spacing: 3px;
            text-transform: uppercase; cursor: pointer; border-radius: 50px;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.4); 
            animation: pulseBtn 2s infinite;
            backdrop-filter: blur(5px);
        }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- Main Glass Card --- */
        .main-card {
            background: var(--glass);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            width: 92%; max-width: 500px;
            text-align: center;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
            z-index: 100;
            overflow: hidden;
            position: relative;
        }

        /* --- CINEMATIC BANNER FIX --- */
        .banner {
            width: 100%;
            aspect-ratio: 2800 / 880; /* Perfect ratio for your image */
            position: relative;
            background: #000;
        }

        .banner img {
            width: 100%; height: 100%;
            object-fit: cover;
            filter: grayscale(100%) contrast(1.15);
            display: block;
        }
        
        /* Neon Scanner Line */
        .scanner { 
            position: absolute; bottom: 0; left: 0; width: 100%; height: 1px; 
            background: var(--neon); box-shadow: 0 0 15px var(--neon); 
            animation: scan 4s infinite linear; 
        }
        @keyframes scan { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* --- Content Area --- */
        .content { 
            padding: 30px 20px; 
            min-height: 180px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* Countdown Style */
        .title { 
            font-weight: 200; font-size: 0.65rem; letter-spacing: 5px; 
            color: #888; margin-bottom: 25px; text-transform: uppercase; 
        }
        .timer { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 100%; }
        .num { font-size: 1.5rem; font-weight: 700; color: #fff; text-shadow: 0 0 10px var(--neon); }
        .label { font-size: 0.5rem; text-transform: uppercase; color: #555; margin-top: 5px; }

        /* Birthday Style */
        .bday-msg {
            display: none; 
            font-family: 'Playfair Display', serif; font-style: italic;
            font-size: 2.2rem; color: #fff; line-height: 1.2;
            text-shadow: 0 0 20px var(--pink);
            animation: elegantFade 1.5s ease-out;
        }
        @keyframes elegantFade { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* --- Balloon Physics --- */
        .balloon-container { position: absolute; bottom: -250px; z-index: 1; pointer-events: none; }
        
        .balloon-body {
            position: relative; width: 55px; height: 75px; 
            border-radius: 50% 50% 50% 50% / 55% 55% 45% 45%;
            box-shadow: inset -6px -10px 15px rgba(0,0,0,0.4);
        }
        /* Shine Effect */
        .balloon-body::before {
            content: ''; position: absolute; top: 10%; left: 20%;
            width: 12px; height: 18px; background: rgba(255,255,255,0.3);
            border-radius: 50%; transform: rotate(-20deg);
        }
        /* String */
        .balloon-string {
            position: absolute; top: 75px; left: 50%;
            width: 1px; height: 120px;
            background: rgba(255, 255, 255, 0.15);
            transform-origin: top;
            animation: sway 2.5s infinite ease-in-out;
        }
        @keyframes sway { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="starfield"></div>
    
    <audio id="music-cd" loop playsinline src="countdown_music.mp3"></audio>
    <audio id="music-bd" loop playsinline src="birthday_music.mp3"></audio>

    <div id="overlay">
        <button id="start-btn">TAP FOR MUSIC â™«</button>
    </div>

    <div class="main-card">
        <div class="banner">
            <img src="eye.jpg" alt="Hafsa">
            <div class="scanner"></div>
        </div>
        
        <div class="content">
            <div id="cd-view">
                <div class="title">Wait for the Magic</div>
                <div class="timer">
                    <div><div class="num" id="d">00</div><div class="label">Days</div></div>
                    <div><div class="num" id="h">00</div><div class="label">Hours</div></div>
                    <div><div class="num" id="m">00</div><div class="label">Mins</div></div>
                    <div><div class="num" id="s">00</div><div class="label">Secs</div></div>
                </div>
            </div>
            <div id="bd-view" class="hidden">
                <div class="bday-msg" id="bday-text">Happy Birthday<br>Hafsaaaaaa</div>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const previewMode = false; // FALSE = Real Mode. TRUE = Test Mode.
        let hasInteracted = false;

        // --- INTERACTION LOGIC ---
        document.getElementById('start-btn').addEventListener('click', function() {
            hasInteracted = true;
            const overlay = document.getElementById('overlay');
            overlay.style.opacity = '0';
            setTimeout(() => overlay.style.display = 'none', 800);
            
            // Immediately check state and play correct music
            const now = new Date();
            const isBday = (now.getMonth() === 1 && now.getDate() === 14);
            if (isBday || previewMode) {
                document.getElementById('music-bd').play().catch(e => console.log(e));
            } else {
                document.getElementById('music-cd').play().catch(e => console.log(e));
            }
        });

        // --- DATE LOGIC ---
        function getTargetDate() {
            const now = new Date();
            let year = now.getFullYear();
            let bday = new Date(`February 14, ${year} 00:00:00`);
            
            // If today is past Feb 14th, aim for next year
            if (now > bday && !(now.getMonth() === 1 && now.getDate() === 14)) {
                bday = new Date(`February 14, ${year + 1} 00:00:00`);
            }
            return bday.getTime();
        }

        let target = getTargetDate();
        let isStarted = false;
        let balloonInterval;

        function update() {
            const now = new Date();
            const isBday = (now.getMonth() === 1 && now.getDate() === 14);

            if (isBday || previewMode) {
                activateBday();
            } else {
                deactivateBday();
                const diff = target - now.getTime();
                
                // Only update numbers if we have a countdown
                if (diff > 0) {
                    document.getElementById('d').innerText = Math.floor(diff / 86400000).toString().padStart(2, '0');
                    document.getElementById('h').innerText = Math.floor((diff % 86400000) / 3600000).toString().padStart(2, '0');
                    document.getElementById('m').innerText = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
                    document.getElementById('s').innerText = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
                }
            }
        }

        function activateBday() {
            if (isStarted) return;
            isStarted = true;
            
            // UI Switch
            document.getElementById('cd-view').classList.add('hidden');
            document.getElementById('bd-view').classList.remove('hidden');
            document.getElementById('bday-text').style.display = 'block';
            
            // Audio Switch (Only if user already tapped)
            if (hasInteracted) {
                document.getElementById('music-cd').pause();
                document.getElementById('music-bd').play().catch(e => console.log(e));
            }
            
            // Start Balloons
            if(!balloonInterval) balloonInterval = setInterval(spawnBalloon, 350);
        }

        function deactivateBday() {
            if (!isStarted) return;
            isStarted = false;
            target = getTargetDate(); // Reset target for next year
            
            // UI Switch
            document.getElementById('cd-view').classList.remove('hidden');
            document.getElementById('bd-view').classList.add('hidden');
            
            // Stop Balloons
            clearInterval(balloonInterval);
            balloonInterval = null;
            
            // Audio Switch
            if (hasInteracted) {
                document.getElementById('music-bd').pause();
                document.getElementById('music-cd').play().catch(e => console.log(e));
            }
        }

        // --- BALLOON GENERATOR ---
        function spawnBalloon() {
            const container = document.createElement('div');
            container.className = 'balloon-container';
            const body = document.createElement('div');
            body.className = 'balloon-body';
            const string = document.createElement('div');
            string.className = 'balloon-string';

            const colors = ['#ff8fa3', '#ff4d6d', '#ff0054', '#c9184a', '#ffb3c1', '#f08080'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            body.style.backgroundColor = randomColor;

            // Random Position & Speed
            container.style.left = Math.random() * 90 + 5 + 'vw';
            const duration = 7 + Math.random() * 5;
            const drift = (Math.random() - 0.5) * 200;
            
            container.animate([
                { transform: 'translateY(0) translateX(0) rotate(0deg)', opacity: 1 },
                { transform: `translateY(-135vh) translateX(${drift}px) rotate(${drift/10}deg)`, opacity: 0 }
            ], { duration: duration * 1000, easing: 'linear' });

            container.appendChild(body);
            container.appendChild(string);
            document.body.appendChild(container);
            
            // Clean up DOM
            setTimeout(() => container.remove(), duration * 1000);
        }

        // Run Loop
        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
